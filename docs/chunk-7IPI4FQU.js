import{b as Z}from"./chunk-SSIYSUN6.js";import{D as i,E as o,F as _,G as D,H as E,J as V,K as s,L as j,M as B,N as I,P as a,Q as x,V as F,X as A,Z as N,aa as Y,c as u,ca as Q,d as w,e as M,f as C,g as T,k as S,l as y,m as P,o as m,p as O,q as U,s as L,t as z,u as c,v as p,x as H,y as R}from"./chunk-4DOGXAOK.js";var J=["frame"],K=(e,n)=>n.hash;function X(e,n){if(e&1&&(i(0,"a",10),C(),i(1,"svg",7),_(2,"path",13)(3,"polyline",14)(4,"line",15),o(),T(),i(5,"span",16),a(6,"Extern"),o()()),e&2){let t=s(2);E("href",t.externalHref,y)}}function tt(e,n){if(e&1&&(i(0,"div",11)(1,"p",17),a(2),o()()),e&2){let t=s();m(2),x(t.description)}}function et(e,n){if(e&1&&(i(0,"a",23),C(),i(1,"svg",7),_(2,"path",13)(3,"polyline",14)(4,"line",15),o(),T(),i(5,"span",26),a(6,"Repository"),o()()),e&2){let t=s(2);E("href",t.repoUrl,y)}}function nt(e,n){if(e&1&&(i(0,"a",31),a(1," Details ansehen "),o()),e&2){let t=s().$implicit;E("href",t.url,y)}}function ot(e,n){if(e&1&&(i(0,"li",27)(1,"div",28)(2,"span",29),a(3),o()(),i(4,"p",30),a(5),o(),c(6,nt,2,1,"a",31),o()),e&2){let t=n.$implicit;m(3),x(t.date),m(2),x(t.message),m(),p(t.url?6:-1)}}function it(e,n){if(e&1&&(i(0,"ul",24),H(1,ot,7,3,"li",27,K),o()),e&2){let t=s(2);m(),R(t.lastCommits)}}function rt(e,n){e&1&&(i(0,"div",25)(1,"p"),a(2,"Noch keine Commits hinterlegt. Schau sp\xE4ter wieder rein!"),o()())}function at(e,n){if(e&1&&(i(0,"div",18),_(1,"iframe",19,0),o(),i(3,"section",20)(4,"div",21)(5,"h3",22),a(6,"Letzte Commits"),o(),c(7,et,7,1,"a",23),o(),c(8,it,3,0,"ul",24)(9,rt,3,0,"div",25),o()),e&2){let t=s(),r=s();m(),E("src",r.safeUrl,P),z("title",t.title?t.title+" \u2013 Vorschau":"Tool Vorschau"),m(6),p(t.repoUrl?7:-1),m(),p(t.lastCommits!=null&&t.lastCommits.length?8:9)}}function lt(e,n){e&1&&(i(0,"div",12),a(1," F\xFCr dieses Tool ist noch keine URL hinterlegt. Bitte in "),i(2,"code"),a(3,"src/app/tools/tools.data.ts"),o(),a(4," die "),i(5,"code"),a(6,"externalUrl"),o(),a(7," setzen. "),o())}function mt(e,n){if(e&1){let t=D();i(0,"section",3)(1,"div",4)(2,"div",5)(3,"button",6),V("click",function(){w(t);let l=s();return M(l.back())}),C(),i(4,"svg",7),_(5,"polyline",8),o()(),T(),i(6,"h2",9),a(7),o()(),c(8,X,7,1,"a",10),o(),c(9,tt,3,1,"div",11),o(),c(10,at,10,4)(11,lt,8,0,"div",12)}if(e&2){let t=n,r=s();m(7),x(t.title),m(),p(r.externalHref?8:-1),m(),p(t.description?9:-1),m(),p(r.safeUrl?10:11)}}function st(e,n){e&1&&(i(0,"div",2),a(1,"Dieses Tool wurde nicht gefunden."),o())}var G=class e{constructor(n){this.pid=n;let t=this.route.snapshot.paramMap.get("slug")??"",r=Z(t);if(this.tool=r,r?.externalUrl){let l=this.location.prepareExternalUrl(r.externalUrl);this.externalHref=l,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(l)}if(A(this.pid)){let l=this.router.getCurrentNavigation(),f=typeof history<"u"&&history.state?history.state:null;this.fromTag=l?.extras?.state?.fromTag??(f&&f.fromTag)??null}else this.fromTag=null}route=u(Y);sanitizer=u(N);location=u(F);router=u(Q);tool;safeUrl;externalHref;fromTag;back(){let n=(this.fromTag||this.pickBestTag(this.tool))?.toLowerCase();if(n){let t=n==="tools"?"/tools":n==="jugger"?"/jugger":n==="games"?"/games":"/tools";this.router.navigateByUrl(t)}else this.router.navigateByUrl("/tools")}pickBestTag(n){let t=(n?.tags||[]).map(r=>r.toLowerCase());return t.length?t.includes("jugger")?"jugger":t.includes("tools")?"tools":t.includes("games")?"games":t[0]:null}frameRef;zone=u(L);ngAfterViewInit(){let n=this.frameRef?.nativeElement;n&&n.addEventListener("load",()=>{this.zone.runOutsideAngular(()=>{try{let t=n.contentDocument||n.contentWindow?.document;if(!t)return;t.documentElement.style.overscrollBehavior="contain",t.body.style.overscrollBehavior="contain";let r=t.scrollingElement||t.documentElement,l=g=>{let{scrollTop:d,scrollHeight:b,clientHeight:h}=r,v=d<=0,k=d+h>=b-1;(v&&g.deltaY<0||k&&g.deltaY>0)&&g.preventDefault()},f=(function(){let g=0;return d=>{if(d.type==="touchstart"){g=d.touches[0]?.clientY??0;return}if(d.type==="touchmove"){let b=d.touches[0]?.clientY??0,h=g-b,{scrollTop:v,scrollHeight:k,clientHeight:W}=r,$=v<=0,q=v+W>=k-1;($&&h<0||q&&h>0)&&d.preventDefault(),g=b}}})();t.addEventListener("wheel",l,{passive:!1}),t.addEventListener("touchstart",f,{passive:!1}),t.addEventListener("touchmove",f,{passive:!1})}catch{}})})}static \u0275fac=function(t){return new(t||e)(O(S))};static \u0275cmp=U({type:e,selectors:[["kl-tool-embed"]],viewQuery:function(t,r){if(t&1&&j(J,5),t&2){let l;B(l=I())&&(r.frameRef=l.first)}},decls:3,vars:1,consts:[["frame",""],[1,"container","mt-8"],[1,"alert","alert--danger"],[1,"mb-4"],[1,"tool-bar"],[1,"tool-left"],["type","button","aria-label","Zur\xFCck","title","Zur\xFCck",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["points","15 18 9 12 15 6"],[1,"mb-0"],["target","_blank","rel","noopener","title","Extern \xF6ffnen","aria-label","Extern \xF6ffnen",1,"btn","btn--ghost",3,"href"],[1,"tool-desc"],[1,"alert","alert--warn"],["d","M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],[2,"margin-left","0.4rem"],[1,"mt-2","subtitle"],[1,"frame-wrap"],["referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin",3,"src"],["aria-labelledby","commitTitle",1,"commit-panel"],[1,"commit-panel__header"],["id","commitTitle"],["target","_blank","rel","noopener","title","Zum Repository",1,"btn","btn--ghost",3,"href"],[1,"commit-list"],[1,"commit-empty"],[1,"btn__label"],[1,"commit-item"],[1,"commit-item__meta"],[1,"commit-date"],[1,"commit-message"],["target","_blank","rel","noopener","title","Commit anzeigen",1,"commit-link",3,"href"]],template:function(t,r){if(t&1&&(i(0,"div",1),c(1,mt,12,4)(2,st,2,0,"div",2),o()),t&2){let l;m(),p((l=r.tool)?1:2,l)}},styles:[".frame-wrap[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 220px);min-height:520px;border:1px solid var(--kl-border);border-radius:var(--kl-radius);overflow:hidden;box-shadow:var(--kl-shadow-sm);background:var(--kl-bg-elev);overscroll-behavior:contain}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0;background:var(--kl-bg-elev)}.commit-panel[_ngcontent-%COMP%]{margin-top:2.5rem;padding:clamp(1.5rem,3vw,2.5rem);border:1px solid color-mix(in srgb,var(--kl-border),transparent 35%);border-radius:calc(var(--kl-radius) * 1.15);background:color-mix(in srgb,var(--kl-bg-elev),transparent 25%);box-shadow:var(--kl-shadow-sm)}.commit-panel__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1.25rem}.commit-panel__header[_ngcontent-%COMP%]   .btn__label[_ngcontent-%COMP%]{margin-left:.4rem}.commit-list[_ngcontent-%COMP%]{display:grid;gap:1.1rem;list-style:none;padding:0;margin:0}.commit-item[_ngcontent-%COMP%]{padding:1rem 1.1rem;border-radius:calc(var(--kl-radius) * .9);border:1px solid color-mix(in srgb,var(--kl-border),transparent 45%);background:color-mix(in srgb,var(--kl-bg),transparent 15%);box-shadow:0 10px 24px #0000000f}.commit-item__meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;font-size:.9rem;color:color-mix(in srgb,var(--kl-text),transparent 25%)}.commit-message[_ngcontent-%COMP%]{margin:.65rem 0 .5rem;font-size:1rem;line-height:1.6}.commit-link[_ngcontent-%COMP%]{font-size:.9rem;color:color-mix(in srgb,var(--kl-text),transparent 10%);text-decoration:underline}.commit-empty[_ngcontent-%COMP%]{padding:1rem 1.2rem;border-radius:calc(var(--kl-radius) * .9);background:color-mix(in srgb,var(--kl-bg),transparent 12%);color:color-mix(in srgb,var(--kl-text),transparent 20%);border:1px dashed color-mix(in srgb,var(--kl-border),transparent 50%);font-size:.95rem}@media (max-width: 720px){.commit-panel__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.commit-item[_ngcontent-%COMP%]{padding:.85rem .95rem}}.tool-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.tool-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.back-btn[_ngcontent-%COMP%]{appearance:none;background:transparent;border:1px solid color-mix(in srgb,var(--kl-text),transparent 80%);border-radius:999px;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;color:var(--kl-text);cursor:pointer}.back-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--kl-brown-500),transparent 90%)}.tool-desc[_ngcontent-%COMP%]{margin-top:.25rem}.subtitle[_ngcontent-%COMP%]{opacity:.9}"]})};export{G as ToolEmbedComponent};
