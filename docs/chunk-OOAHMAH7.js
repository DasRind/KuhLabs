import{b as Y}from"./chunk-XY2TOOVR.js";import{D as i,E as r,F as b,G as B,H as T,J as D,K as p,L as j,M as H,N as O,P as l,Q as y,V as I,X as V,Z as F,aa as z,c as d,ca as A,d as w,e as k,f as _,g as C,k as S,l as M,m as U,o as c,p as L,q as R,s as P,u as f,v as g}from"./chunk-4DOGXAOK.js";var G=["frame"];function q(n,t){if(n&1&&(i(0,"a",10),_(),i(1,"svg",7),b(2,"path",14)(3,"polyline",15)(4,"line",16),r(),C(),i(5,"span",17),l(6,"Extern"),r()()),n&2){let e=p();T("href",e.externalUrl,M)}}function J(n,t){if(n&1&&(i(0,"div",11)(1,"p",18),l(2),r()()),n&2){let e=p();c(2),y(e.description)}}function K(n,t){if(n&1&&(i(0,"div",12),b(1,"iframe",19,0),r()),n&2){let e=p(2);c(),T("src",e.safeUrl,U)}}function X(n,t){n&1&&(i(0,"div",13),l(1," F\xFCr dieses Tool ist noch keine URL hinterlegt. Bitte in "),i(2,"code"),l(3,"src/app/tools/tools.data.ts"),r(),l(4," die "),i(5,"code"),l(6,"externalUrl"),r(),l(7," setzen. "),r())}function $(n,t){if(n&1){let e=B();i(0,"section",3)(1,"div",4)(2,"div",5)(3,"button",6),D("click",function(){w(e);let a=p();return k(a.back())}),_(),i(4,"svg",7),b(5,"polyline",8),r()(),C(),i(6,"h2",9),l(7),r()(),f(8,q,7,1,"a",10),r(),f(9,J,3,1,"div",11),r(),f(10,K,3,1,"div",12)(11,X,8,0,"div",13)}if(n&2){let e=t,o=p();c(7),y(e.title),c(),g(e.externalUrl?8:-1),c(),g(e.description?9:-1),c(),g(o.safeUrl?10:11)}}function ee(n,t){n&1&&(i(0,"div",2),l(1,"Dieses Tool wurde nicht gefunden."),r())}var N=class n{constructor(t){this.pid=t;let e=this.route.snapshot.paramMap.get("slug")??"",o=Y(e);if(this.tool=o,o?.externalUrl&&(this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(o.externalUrl)),V(this.pid)){let a=this.router.getCurrentNavigation(),u=typeof history<"u"&&history.state?history.state:null;this.fromTag=a?.extras?.state?.fromTag??(u&&u.fromTag)??null}else this.fromTag=null}route=d(z);sanitizer=d(F);location=d(I);router=d(A);tool;safeUrl;fromTag;back(){let t=(this.fromTag||this.pickBestTag(this.tool))?.toLowerCase();if(t){let e=t==="tools"?"/tools":t==="jugger"?"/jugger":t==="games"?"/games":"/tools";this.router.navigateByUrl(e)}else this.router.navigateByUrl("/tools")}pickBestTag(t){let e=(t?.tags||[]).map(o=>o.toLowerCase());return e.length?e.includes("jugger")?"jugger":e.includes("tools")?"tools":e.includes("games")?"games":e[0]:null}frameRef;zone=d(P);ngAfterViewInit(){let t=this.frameRef?.nativeElement;t&&t.addEventListener("load",()=>{this.zone.runOutsideAngular(()=>{try{let e=t.contentDocument||t.contentWindow?.document;if(!e)return;e.documentElement.style.overscrollBehavior="contain",e.body.style.overscrollBehavior="contain";let o=e.scrollingElement||e.documentElement,a=m=>{let{scrollTop:s,scrollHeight:h,clientHeight:E}=o,v=s<=0,x=s+E>=h-1;(v&&m.deltaY<0||x&&m.deltaY>0)&&m.preventDefault()},u=(function(){let m=0;return s=>{if(s.type==="touchstart"){m=s.touches[0]?.clientY??0;return}if(s.type==="touchmove"){let h=s.touches[0]?.clientY??0,E=m-h,{scrollTop:v,scrollHeight:x,clientHeight:Q}=o,W=v<=0,Z=v+Q>=x-1;(W&&E<0||Z&&E>0)&&s.preventDefault(),m=h}}})();e.addEventListener("wheel",a,{passive:!1}),e.addEventListener("touchstart",u,{passive:!1}),e.addEventListener("touchmove",u,{passive:!1})}catch{}})})}static \u0275fac=function(e){return new(e||n)(L(S))};static \u0275cmp=R({type:n,selectors:[["kl-tool-embed"]],viewQuery:function(e,o){if(e&1&&j(G,5),e&2){let a;H(a=O())&&(o.frameRef=a.first)}},decls:3,vars:1,consts:[["frame",""],[1,"container","mt-8"],[1,"alert","alert--danger"],[1,"mb-4"],[1,"tool-bar"],[1,"tool-left"],["type","button","aria-label","Zur\xFCck","title","Zur\xFCck",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["points","15 18 9 12 15 6"],[1,"mb-0"],["target","_blank","rel","noopener","title","Extern \xF6ffnen","aria-label","Extern \xF6ffnen",1,"btn","btn--ghost",3,"href"],[1,"tool-desc"],[1,"frame-wrap"],[1,"alert","alert--warn"],["d","M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],[2,"margin-left","0.4rem"],[1,"mt-2","subtitle"],["referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin",3,"src"]],template:function(e,o){if(e&1&&(i(0,"div",1),f(1,$,12,4)(2,ee,2,0,"div",2),r()),e&2){let a;c(),g((a=o.tool)?1:2,a)}},styles:[".frame-wrap[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 220px);min-height:520px;border:1px solid var(--kl-border);border-radius:var(--kl-radius);overflow:hidden;box-shadow:var(--kl-shadow-sm);background:var(--kl-bg-elev);overscroll-behavior:contain}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0;background:var(--kl-bg-elev)}.tool-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.tool-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.back-btn[_ngcontent-%COMP%]{appearance:none;background:transparent;border:1px solid color-mix(in srgb,var(--kl-text),transparent 80%);border-radius:999px;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;color:var(--kl-text);cursor:pointer}.back-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--kl-brown-500),transparent 90%)}.tool-desc[_ngcontent-%COMP%]{margin-top:.25rem}.subtitle[_ngcontent-%COMP%]{opacity:.9}"]})};export{N as ToolEmbedComponent};
