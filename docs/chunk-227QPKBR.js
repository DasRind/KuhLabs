import{b as Y}from"./chunk-MI6PCT57.js";import{D as r,E as a,F as x,G as P,H as T,J as B,K as p,L as D,M as j,N as O,P as l,Q as y,V as I,X as V,Z as F,aa as z,c as d,ca as A,d as w,e as k,f as _,g as C,k as S,l as M,m as L,o as c,p as U,q as H,s as R,u,v as g}from"./chunk-4DOGXAOK.js";var G=["frame"];function q(n,t){if(n&1&&(r(0,"a",10),_(),r(1,"svg",7),x(2,"path",14)(3,"polyline",15)(4,"line",16),a(),C(),r(5,"span",17),l(6,"Extern"),a()()),n&2){let e=p(2);T("href",e.externalHref,M)}}function J(n,t){if(n&1&&(r(0,"div",11)(1,"p",18),l(2),a()()),n&2){let e=p();c(2),y(e.description)}}function K(n,t){if(n&1&&(r(0,"div",12),x(1,"iframe",19,0),a()),n&2){let e=p(2);c(),T("src",e.safeUrl,L)}}function X(n,t){n&1&&(r(0,"div",13),l(1," F\xFCr dieses Tool ist noch keine URL hinterlegt. Bitte in "),r(2,"code"),l(3,"src/app/tools/tools.data.ts"),a(),l(4," die "),r(5,"code"),l(6,"externalUrl"),a(),l(7," setzen. "),a())}function $(n,t){if(n&1){let e=P();r(0,"section",3)(1,"div",4)(2,"div",5)(3,"button",6),B("click",function(){w(e);let i=p();return k(i.back())}),_(),r(4,"svg",7),x(5,"polyline",8),a()(),C(),r(6,"h2",9),l(7),a()(),u(8,q,7,1,"a",10),a(),u(9,J,3,1,"div",11),a(),u(10,K,3,1,"div",12)(11,X,8,0,"div",13)}if(n&2){let e=t,o=p();c(7),y(e.title),c(),g(o.externalHref?8:-1),c(),g(e.description?9:-1),c(),g(o.safeUrl?10:11)}}function ee(n,t){n&1&&(r(0,"div",2),l(1,"Dieses Tool wurde nicht gefunden."),a())}var N=class n{constructor(t){this.pid=t;let e=this.route.snapshot.paramMap.get("slug")??"",o=Y(e);if(this.tool=o,o?.externalUrl){let i=this.location.prepareExternalUrl(o.externalUrl);this.externalHref=i,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(i)}if(V(this.pid)){let i=this.router.getCurrentNavigation(),f=typeof history<"u"&&history.state?history.state:null;this.fromTag=i?.extras?.state?.fromTag??(f&&f.fromTag)??null}else this.fromTag=null}route=d(z);sanitizer=d(F);location=d(I);router=d(A);tool;safeUrl;externalHref;fromTag;back(){let t=(this.fromTag||this.pickBestTag(this.tool))?.toLowerCase();if(t){let e=t==="tools"?"/tools":t==="jugger"?"/jugger":t==="games"?"/games":"/tools";this.router.navigateByUrl(e)}else this.router.navigateByUrl("/tools")}pickBestTag(t){let e=(t?.tags||[]).map(o=>o.toLowerCase());return e.length?e.includes("jugger")?"jugger":e.includes("tools")?"tools":e.includes("games")?"games":e[0]:null}frameRef;zone=d(R);ngAfterViewInit(){let t=this.frameRef?.nativeElement;t&&t.addEventListener("load",()=>{this.zone.runOutsideAngular(()=>{try{let e=t.contentDocument||t.contentWindow?.document;if(!e)return;e.documentElement.style.overscrollBehavior="contain",e.body.style.overscrollBehavior="contain";let o=e.scrollingElement||e.documentElement,i=m=>{let{scrollTop:s,scrollHeight:h,clientHeight:E}=o,v=s<=0,b=s+E>=h-1;(v&&m.deltaY<0||b&&m.deltaY>0)&&m.preventDefault()},f=(function(){let m=0;return s=>{if(s.type==="touchstart"){m=s.touches[0]?.clientY??0;return}if(s.type==="touchmove"){let h=s.touches[0]?.clientY??0,E=m-h,{scrollTop:v,scrollHeight:b,clientHeight:Q}=o,W=v<=0,Z=v+Q>=b-1;(W&&E<0||Z&&E>0)&&s.preventDefault(),m=h}}})();e.addEventListener("wheel",i,{passive:!1}),e.addEventListener("touchstart",f,{passive:!1}),e.addEventListener("touchmove",f,{passive:!1})}catch{}})})}static \u0275fac=function(e){return new(e||n)(U(S))};static \u0275cmp=H({type:n,selectors:[["kl-tool-embed"]],viewQuery:function(e,o){if(e&1&&D(G,5),e&2){let i;j(i=O())&&(o.frameRef=i.first)}},decls:3,vars:1,consts:[["frame",""],[1,"container","mt-8"],[1,"alert","alert--danger"],[1,"mb-4"],[1,"tool-bar"],[1,"tool-left"],["type","button","aria-label","Zur\xFCck","title","Zur\xFCck",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["points","15 18 9 12 15 6"],[1,"mb-0"],["target","_blank","rel","noopener","title","Extern \xF6ffnen","aria-label","Extern \xF6ffnen",1,"btn","btn--ghost",3,"href"],[1,"tool-desc"],[1,"frame-wrap"],[1,"alert","alert--warn"],["d","M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],[2,"margin-left","0.4rem"],[1,"mt-2","subtitle"],["referrerpolicy","no-referrer","sandbox","allow-scripts allow-same-origin",3,"src"]],template:function(e,o){if(e&1&&(r(0,"div",1),u(1,$,12,4)(2,ee,2,0,"div",2),a()),e&2){let i;c(),g((i=o.tool)?1:2,i)}},styles:[".frame-wrap[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 220px);min-height:520px;border:1px solid var(--kl-border);border-radius:var(--kl-radius);overflow:hidden;box-shadow:var(--kl-shadow-sm);background:var(--kl-bg-elev);overscroll-behavior:contain}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0;background:var(--kl-bg-elev)}.tool-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.tool-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.back-btn[_ngcontent-%COMP%]{appearance:none;background:transparent;border:1px solid color-mix(in srgb,var(--kl-text),transparent 80%);border-radius:999px;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;color:var(--kl-text);cursor:pointer}.back-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--kl-brown-500),transparent 90%)}.tool-desc[_ngcontent-%COMP%]{margin-top:.25rem}.subtitle[_ngcontent-%COMP%]{opacity:.9}"]})};export{N as ToolEmbedComponent};
